---
title: "La lenición de la /d/ intervocálica de chihuahuenses en la Ciudad de México"
subtitle: "Resultados del estudio piloto"
author: "Max Carey"
date: "24/1/2019"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

```{r, load_refs, echo=FALSE, cache=FALSE}
BibOptions(check.entries = FALSE, 
           bib.style = "authoryear", 
           cite.style = 'authoryear', 
           style = "markdown",
           hyperlink = FALSE, 
           dashed = FALSE)
myBib <- ReadBib("/Users/maxcarey/Documents/tesis/Zotero.bib", check = FALSE)
```


background-image: url(iloveuraccent.jpg)

---

class: inverse, center, middle

# Corpus

---

# Tabla 1: Información sociodemográfica de los hablantes

--
```{r mostrar_tabla_hablantes, echo=FALSE}
kable(speakerSocialData) %>%
  kable_styling() %>%
  scroll_box(width = "100%", height = "250px")
```

- Datos recopilados durante el año académico 2017-2018
--

- Las entrevistas de los chihuahuenses vienen del COEM
--

- Varios autores han usado medidas relativas de intensidad: tanto restas `r Citep(myBib, 'eddington_what_2011')` `r Citep(myBib, 'simonet_lenition_2012')` como proporciones `r Citep(myBib, 'carrasco2012')` `r Citep(myBib, 'scrivner2016')`

---
class: inverse, center, middle

# Variable dependiente

---
#### Figura 1: Oscilograma, espectrograma, y contorno de intensidad de la palabra "frenada"
--

```{r, out.width = "100%", out.height="375px", echo=FALSE}
knitr::include_graphics("frenadas.png")
```
 <center>
 <audio controls>
  <source src="frenadas.wav" type="audio/wav">
Si estás viendo este mensaje, quiere decir que no puedes ver el audio, busca la versión html de este documento, por favor.
</audio>
</center>

- Valle de intensidad: 69.70 dB
--

- Pico de intensidad: 71.99 dB

--
- Índice de intensidad: 3.29 [(71.99 - 69.70) + 1)]

---
#### Figura 2: Oscilograma, espectrograma, y contorno de intensidad de la frase “todos los camiones” (cdmx-in-situ-m-31-lic)
--

```{r, out.width = "100%", out.height="375px", echo=FALSE}
knitr::include_graphics("todolcamiones.png")
```
 <center>
 <audio controls>
  <source src="todolcamiones.wav" type="audio/wav">
Si estás viendo este mensaje, quiere decir que no puedes ver el audio, busca la versión html de este documento, por favor.
</audio>
</center>

- No hay un valle de intensidad
--

- Se tomó ciertas medidas acústicas cualitativas (véase apéndice)
--

- Los *tokens* de la /d/ intervocálica entre 600 y 1500 segundos.
--

- Techo teórico de 1386 tokens (-209)
--

-**1177** *tokens* en total

---

class: inverse, center, middle

# Variables Sociolingüísticas

---
#### Tabla 2: Variables Sociales
```{r, echo=FALSE}
kable(variablesSociales)
```

<br>

#### Tabla 3: Variables Lingüísticas
```{r, echo=FALSE}
kable(variableLings)
```

---

class: inverse, center, middle

# Estadística descriptiva

---

class: inverse, center, middle

# Grupo dialectal

---
# Grupo dialectal

.pull-left[
#### Figura 3: Ploteos de intensidad de la variable dependiente por los tres grupos (todos juntos)
```{r, echo=FALSE, fig.height=6}
ggplot(dData, aes(x = intensityDif, fill = grupo)) +
  geom_density(alpha = .3)
```
--
]

.pull-right[

- 1.07 (más debilitamiento) para los chihuahuenses in-situ

- 1.21 (debilitamiento intermedio) para los chihuahuenses en la CDMX

- 1.99 (menos debilitamiento) para los de la Ciudad de México in-situ.
]
---

class: center

#### Figura 4: Ploteo de densidad de la variable dependiente del grupo CHI-EN-CDMX.

```{r, echo=FALSE}
# Get the distribution of just the experimental data and plot peaks
# https://stackoverflow.com/questions/53841391/what-is-the-best-way-to-calculate-and-display-peaks-of-a-ggplot2geom-density/53841854?noredirect=1#comment94532420_53841854 
# This is a nice work around to put a read dot on the peak, but it doesn't tell me what the peak is
p <- ggplot(dDataCHICDMX, aes(x = intensityDif)) + geom_density() + ggtitle("CHI-EN-CDMX")
pb <- ggplot_build(p)
p + stat_peaks(
  data = pb[['data']][[1]],
  aes(x = x, y = density),
  color = "red",
  size = 5,
  geom = "text",
  angle = 0,
  hjust = -0.3,
  # This allows me to ignore a third peak that is located around 15 or so
  ignore_threshold = .5
) +
  stat_peaks(data = pb[['data']][[1]],
  aes(x = x, y = density),
  color = "red",
  # This allows me to ignore a third peak that is located around 15 or so
  ignore_threshold = .5,
  size = 2)
```

---

class: inverse, center, middle

# Sexo

---

.pull-left[
#### Figura 5: Ploteo de densidad de la variable dependiente del grupo CHI-EN-CDMX.
```{r, echo=FALSE}
medianSexo <- aggregate(intensityDif ~  sexo + grupo, dData, median)

ggplot(dData, aes(y = intensityDif, fill = sexo, x = sexo)) +
  geom_boxplot() +
  facet_grid(~grupo) +
  scale_fill_manual(values=c("#19A0AA", "#F15F36")) +
  ggtitle("Distribution of dependent variable by sex") + theme(axis.text.x = element_blank(), axis.ticks.x = element_blank(), axis.title = element_blank()) +
  geom_text(data = medianSexo, aes(label = round(intensityDif, digits=2), y = intensityDif + 0.6))
```
]

.pull-right[

<br>
<br>
<br>

- Interpretación sociolingüística clásica:

- "For stable sociolinguistic variables, women show a lower rate of stigmatized variants and a higher rate of prestige variants than men" `r Citep(myBib, 'labov_principles_2006')`

- Interpretación de la tercera ola `r Citet(myBib, 'eckert_variation_2008-1')`

- Los hombres expresando rasgos: “relajado”, y “buena onda”;

- Mujeres podrían estar expresando identidades como “trabajadora” y “seria”.


]
---

class: inverse, center, middle

# Variables lingüísticas

---

class: inverse, center, middle

# Vocal previa y vocal siguiente

---

#### Tabla 4: Conteos y Porcentajes de la vocal previa por grupo dialectal
```{r, echo=FALSE}
kable(createTable(dData, "grupo", "preceding_phone"))
```

<br>

#### Tabla 5: Conteos y Porcentajes de la vocal previa por grupo dialectal
```{r, echo=FALSE}
kable(createTable(dData, "grupo", "following_phone"))
```
---

class: center

#### Figura 6: Ploteo de caja de la variable dependiente según la vocal previa y el grupo dialectal
```{r, echo=FALSE}
ggplot(dData, aes(y = intensityDif, x = preceding_phone, fill = preceding_phone)) +
  geom_boxplot() +
  ylab(expression(más_debilitamiento %<->% menos_debilitamiento)) +
  geom_text(data = medianPreceding_phone, aes(label = round(intensityDif, digits=2), y = intensityDif + 0.6)) + #ggtitle("Distribución de la variable dependiente según la vocal previa") +
 scale_fill_brewer(palette="Spectral") + facet_wrap(~ grupo)
```

---

class: center

#### Figura 7: Ploteo de caja de la variable dependiente según la vocal siguiente y el grupo dialectal
```{r echo=FALSE}
ggplot(dData, aes(y = intensityDif, x = following_phone, fill = following_phone)) +
  geom_boxplot() +
  ylab(expression(más_debilitamiento %<->% menos_debilitamiento)) +
  geom_text(data = medianFollowing_phone, aes(label = round(intensityDif, digits=2), y = intensityDif + 0.6)) +
# + ggtitle("Distribución de la variable dependiente según la vocal siguiente") +
 scale_fill_brewer(palette="Spectral") + facet_wrap(~ grupo)
```
---

class: center, inverse, middle

# Tonicidad

---

class: center

#### Figura 8: Ploteo de caja de la variable dependiente según la tonicidad y el grupo dialectal ”
```{r, echo=FALSE}
ggplot(dData, aes(y = intensityDif, x = stressStatus, fill = stressStatus)) +
  geom_boxplot() + ggtitle("Distribucioón de la variable dependiente por tonicidad") +
  ylab(expression(más_debilitamiento %<->% menos_debilitamiento)) +
facet_wrap(~ grupo) + geom_text(data = medianStress, aes(label = round(intensityDif, digits=2), y = intensityDif + 0.6)) + scale_fill_brewer(palette="OrRd")

```
---

class: center, inverse, middle

# Frecuencia de token

---

class: center

#### Figura 8: Diagramas de dipsersión de la variable dependiente y la frecuencia de token con una regresión lineal simple por grupo.
```{r, echo=FALSE}
# The Alpha value adds transparecy to each of the points on the scatter plot
# Since by default, ggplot2 stacks values on top of each other that are the same, this can misrepresent the data and we can see where this occurs with the darker data points.
my.formula <- y ~ x
dData %>%
  ggplot(aes(y = intensityDif, x = wordFrequency)) +
  geom_point(alpha = 0.5, position = position_jitter(w = .1, h = 0)) +
  geom_smooth(method = "lm", formula = my.formula) + facet_wrap(~ grupo) +
  # This comes from the gmisc package
  stat_poly_eq(formula = my.formula, aes(label = paste(..eq.label.., ..rr.label.., sep = "~~~")),parse = TRUE)
```
---

class: center, middle, inverse

# Hablante

---
class: center

#### Figura 9: Ploteos de caja de la variable dependiente por hablante (coloreado por grupo)
```{r, echo=FALSE}
ggplot(dData, aes(y = intensityDif, x = speaker, color = grupo)) +
  geom_boxplot() + # ggtitle("Distribution of dependent variable by speaker") +
  # Acortar las etiquetas de eje horizontal
  scale_x_discrete(labels = c('1f','2m','3f', '4m', '5f', '6m', '7f', '8m', '9m', '10f','11f','12m')) +
  ylab(expression(más_debilitamiento %<->% menos_debilitamiento))
```

---
class: center

#### Figura 10: Ploteos de densidad de la variable dependiente por hablante (coloreado por grupo)
```{r, echo=FALSE}
ggplot(dData, aes(x = intensityDif, color = grupo)) +
  geom_density() + facet_wrap(~ speaker) + ggtitle("Distribution of dependent variable by speaker") +
  # Acortar las etiquetas de eje horizontal
  scale_x_discrete(labels = c('1f','2m','3f', '4m', '5f', '6m', '7f', '8m', '9m', '10f','11f','12m'))
```

---

class: center, middle, inverse

# Ítem léxico

---
class: center

.pull-left[
#### Figura 11: Nube de palabra de los ítems léxicos del grupo CHI-IN-SITU
```{r, echo=FALSE}
wordcloud2(wordCloudDataOne, shape="diamond")
```
]
.pull-right[
#### Tabla 7: Los ítems léxicos del grupo CHI-IN-CDMX
```{r echo=FALSE}
kable(wordCloudDataOne) %>%
  kable_styling() %>%
  scroll_box(width = "100%", height = "400px")
```
]
---
class: center

.pull-left[
#### Figuras 12: Nube de palabra de los ítems léxicos del grupo CHI-EN-CDMX
```{r, echo=FALSE}
wordClouDataTwo <- dDataCHICDMX %>%
  select(Word) %>%
  group_by(Word) %>%
  count(Word) %>%
  arrange(desc(n))
wordcloud2(wordClouDataTwo, shape="diamond")
```
]

.pull-right[
#### Tabla 8: Los ítems léxicos del grupo CHI-EN-CDMX con una frecuencia igual o mayor a tres
```{r, echo=FALSE}
kable(wordClouDataTwo) %>%
  kable_styling() %>%
  scroll_box(width = "100%", height = "400px")
```
]

---

class: center

.pull-left[
#### Figuras 13: Nube de palabra de los ítems léxicos del grupo CDMX-IN-SITU
```{r, echo=FALSE}
wordCloudDataThree <- dDataCDMXSITU %>%
  select(Word) %>%
  group_by(Word) %>%
  count(Word) %>%
  arrange(desc(n))
wordcloud2(wordCloudDataThree, shape="diamond")
```
]

.pull-right[
#### Tabla 9: Los ítems léxicos del grupo CHI-EN-CDMX con una frecuencia igual o mayor a tres
```{r echo=FALSE}
kable(wordCloudDataThree) %>%
  kable_styling() %>%
  scroll_box(width = "100%", height = "400px")
```
]

---

class: center, middle, inverse

# Estadística inferencial

---

class: center, middle, inverse

# Métodos no paramétricos

---

.pull-left[
#### Figuras 14: Distribución de la variable dependiente (izquierda); distribución normal (derecha)
```{r echo=FALSE}
p1 <- ggplot(data = dData, aes(x = intensityDif)) + geom_density()
p2 <- ggplot(data = data.frame(x = c(-3, 3)), aes(x)) +
  stat_function(fun = dnorm, n = 101, args = list(mean = 0, sd = 1)) + ylab("")
grid.arrange(p1, p2, nrow = 1)
```
]

<br>
<br>
<br>

.pull-right[
- Los métodos no paramétricos no asumen que los datos siguen alguna distribución específica
`r Citep(myBib, 'baayen_analyzing_2008')` p.77

- Suelen ser muy útiles para analizar datos sociolingüísticos, ya que dichos datos tienden a ser desordenados entre y dentro de los individuos `r Citep(myBib, 'tagliamonte_variationist_2012')`

]

---

class: center, inverse, middle

# Bosques aletorios
---

#### Figuras 15: Bosque aleatorio generado con LVS, variables lingüísticas y sociales
```{r, out.width = "100%", out.height="375px", echo=FALSE}
knitr::include_graphics("rf1.png")
```

---

class: center, inverse, middle

# Árbol de inferencia condicional

---

#### Figuras 16: Árbol de inferencia condicional con las variables lingüísticas y sociales juntas
```{r, echo=FALSE, message=FALSE, fig.width=18, fig.height=10}
# When using the partykit package the ctree function is loaded which produces a slightly different tree, but with the same heirarchy of variables, supposedly partykit is an enhancement of the party package.
# The benifit of using partykit is that you can control the size of the text so that people can actually read the tree
# http://r.789695.n4.nabble.com/ctree-party-changing-font-sizes-in-plots-td907947.html
library(partykit)
arbolTodo=ctree(dData$intensityDif~dData$preceding_phone+dData$following_phone+dData$stressStatus+dData$wordFrequency+dData$grupo+dData$sexo)
plot(arbolTodo, gp = gpar(fontsize = 20))
```
---

#### Figuras 17: Árbol de inferencia condicional con las variables sociales
```{r, echo=FALSE, fig.width=18, fig.height=10}
arbolSocial=ctree(dData$intensityDif~dData$grupo+dData$sexo)
plot(arbolSocial, gp = gpar(fontsize = 25))
```
---

#### Figuras 18: Árbol de inferencia condicional con las variables lingüísticas
```{r, echo=FALSE, fig.width=25, fig.height=12}
arbolLinguistico=ctree(dData$intensityDif~dData$preceding_phone+dData$following_phone+dData$stressStatus+dData$wordFrequency)
plot(arbolLinguistico, gp = gpar(fontsize = 25))
```
---

class: center, middle, inverse

# Método de efectos mixtos

---
#### Tabla 10: Factores aleatorios del modelo lineal de efectos mixtos: ítem léxico y hablante<sup>1</sup>
```{r echo=FALSE}
kable(factores_aleatorios)
```

#### Tabla 11<sup>1</sup>: Factores fijos del modelo lineal de efectos mixtos
```{r, echo=FALSE}
kable(factores_fijos ) %>% kable_styling() %>% scroll_box(width = "100%", height = "225px")
```

<br>
<br>
.footnote[
[1] Modelos creados con Language Variation Suite `r Citep(myBib, 'scrivner2016')`)
]

---

class: center, inverse, middle

# Comentarios finales

---

1. Los datos en este estudio reafirman las observaciones dialectales con respeto a la /d/ intervocálica en México `r Citep(myBib, 'lope_blanch_atlas_1992')`
--

2. Facilita el entendimiento de la /d/ intervocálica como un fenómeno continuo como se ha hecho en otros dialectos del español
--

## Las preguntas de investigación

> 1a) ¿Cambia el habla de los chihuahuenses que vienen a vivir a la CDMX, una nueva zona dialectal? Si es así, ¿cómo cambia?

> 1b) ¿Acomodan sus rasgos fónicos a los de la variedad de la CDMX? ¿empiezan a producir variantes de la /d/ menos debilitadas?

> 1c) Si es así: ¿Cuáles son los factores sociales, lingüísticos e identitarios que condicionan esta variación?

---

# Referencias (1/2)
El reporte escrito se encuentra [Aquí](http://rpubs.com/axme100/piloto)


```{r, 'refs2', results='asis', echo=FALSE}
PrintBibliography(myBib, start = 1, end = 6)
```

---

# Referencias (2/2)

```{r, 'refs1', results='asis', echo=FALSE}
PrintBibliography(myBib, start = 7, end = 9)
```